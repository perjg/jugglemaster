{"version":3,"sources":["webpack:///webpack/bootstrap 3f8e8972bd2396e99b1e","webpack:///./src.js","webpack:///../index.js","webpack:///../dist/jmlib.js","webpack:///../dist/ball.js","webpack:///../dist/arm.js","webpack:///../dist/hand.js","webpack:///../dist/validator.js"],"names":[],"mappings":"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","file":"/Users/perjg/dev/jugglemaster/src/jmlib-js/demo/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 3f8e8972bd2396e99b1e\n **/","/*\n * jmlib-js - Portable JuggleMaster Library (JavaScript Version)\n * Version 2.0\n * (C) Per Johan Groland 2006-2016\n *\n * Based on JMLib 2.0, (C) Per Johan Groland and Gary Briggs\n *\n * Based on JuggleMaster Version 1.60\n * Copyright (c) 1995-1996 Ken Matsuoka\n *\n * You may redistribute and/or modify JMLib_js under the terms of the\n * Modified BSD License as published in various places online or in the\n * COPYING.jmlib file in the package you downloaded.\n *\n * This program is distributed in the hope that it will be useful, but\n * WITHOUT  ANY  WARRANTY;  without   even  the  implied  warranty  of\n * MERCHANTABILITY or  FITNESS FOR A PARTICULAR PURPOSE.   See the\n * Modified BSD License for more details.\n */\n\nimport JuggleMaster from '../index';\n\nconst jm = new JuggleMaster(),\n\tjmlib = jm.jmlib,\n\tvalidator = jm.validator;\n\nlet canvas, ctx, timerEnabled, timerInterval, siteonscreenEnabled;\n\nfunction getArgs() {\n\tlet args = {},\n\t\tquery = location.search.substring(1),\n\t\tpairs;\n\n\tif (query === null) { return null; }\n\n\tpairs = query.split('&');\n\n\tfor (let i = 0; i < pairs.length; i++) {\n\t\tlet pos = pairs[i].indexOf('=');\n\t\tif (pos === -1) { continue; }\n\n\t\tlet argName = pairs[i].substring(0, pos),\n\t\t\tvalue   = pairs[i].substring(pos+1);\n\n\t\targs[argName] = decodeURIComponent(value);\n\t}\n\n\treturn args;\n}\n\nfunction loop() {\n\tjmlib.doJuggle();\n\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\tctx.lineWidth = '1.0';\n\n\t// draw head\n\tctx.beginPath();\n\tctx.moveTo(jmlib.ap.hx+jmlib.ap.hr, jmlib.ap.hy);\n\tctx.arc(jmlib.ap.hx, jmlib.ap.hy, jmlib.ap.hr, 0, Math.PI*2, false);\n\tctx.closePath();\n\tctx.stroke();\n\n\t// draw arms\n\tfor (var i=0;i<5;i++) {\n\t\tctx.beginPath();\n\t\tctx.moveTo(jmlib.ap.rx[i], jmlib.ap.ry[i]);\n\t\tctx.lineTo(jmlib.ap.rx[i+1], jmlib.ap.ry[i+1]);\n\t\tctx.closePath();\n\t\tctx.stroke();\n\n\t\tctx.beginPath();\n\t\tctx.moveTo(jmlib.ap.lx[i], jmlib.ap.ly[i]);\n\t\tctx.lineTo(jmlib.ap.lx[i+1], jmlib.ap.ly[i+1]);\n\t\tctx.closePath();\n\t\tctx.stroke();\n\t}\n\n\t// draw hands\n\tfor (var i=0; i < 10; i++) {\n\t\tctx.beginPath();\n\t\tctx.moveTo(jmlib.rhand.gx + jmlib.handpoly.rx[i],        jmlib.rhand.gy + jmlib.handpoly.ry[i]);\n\t\tctx.lineTo(jmlib.rhand.gx + jmlib.handpoly.rx[(i+1)%10], jmlib.rhand.gy + jmlib.handpoly.ry[(i+1)%10]);\n\t\tctx.closePath();\n\t\tctx.stroke();\n\n\t\tctx.beginPath();\n\t\tctx.moveTo(jmlib.lhand.gx + jmlib.handpoly.lx[i],        jmlib.lhand.gy + jmlib.handpoly.ly[i]);\n\t\tctx.lineTo(jmlib.lhand.gx + jmlib.handpoly.lx[(i+1)%10], jmlib.lhand.gy + jmlib.handpoly.ly[(i+1)%10]);\n\t\tctx.closePath();\n\t\tctx.stroke();\n\t}\n\n\t// draw balls\n\tvar r = jmlib.getBallRadius();\n\tif (r < 1) { r = 1; }\n\tfor (var i = 0; i < jmlib.numBalls(); i++) {\n\t\tvar ball = jmlib.b[i];\n\n\t\tctx.beginPath();\n\t\tctx.moveTo(ball.gx+r+r, ball.gy);\n\t\tctx.arc(ball.gx+r, ball.gy+r, r, 0, Math.PI*2, false);\n\t\tctx.fillStyle = getColor(i);\n\t\tctx.fill();\n\t\tctx.closePath();\n\t}\n\n\t// show siteswap\n\tshow_siteonscreen();\n\n\tif (timerEnabled) {\n\t\tsetTimeout(loop, timerInterval);\n\t}\n}\n\nfunction getColor(i) {\n\tswitch(i%10) {\n\t\tcase 0:\n\t\t\treturn 'red';\n\t\tcase 1:\n\t\t\treturn 'blue';\n\t\tcase 2:\n\t\t\treturn 'green';\n\t\tcase 3:\n\t\t\treturn 'orange';\n\t\tcase 4:\n\t\t\treturn 'pink';\n\t\tcase 5:\n\t\t\treturn 'purple';\n\t\tcase 6:\n\t\t\treturn 'magenta';\n\t\tcase 7:\n\t\t\treturn 'red';\n\t\tcase 8:\n\t\t\treturn 'red';\n\t\tcase 9:\n\t\t\treturn 'red';\n\t\tdefault:\n\t\t\treturn 'red';\n\t}\n}\n\n// Shows the site on screen inside an element called siteonscreen\n// if the element is not found, no site is shown on screen\nfunction show_siteonscreen() {\n\tif (!siteonscreenEnabled) { return; }\n\n\tvar el = document.getElementById('siteonscreen');\n\n\tif (!el) { return; }\n\n\tvar sitetext = '';\n\tvar start = jmlib.getSiteposStart();\n\tvar stop  = jmlib.getSiteposStop();\n\tvar diff = stop - start;\n\n\t// first part of string\n\tif (start > 0) {\n\t\tsitetext += jmlib.siteswap.substring(0, start);\n\t}\n\n\t// active part of string\n\tsitetext += '<b style=\\'color: red; font-weight: normal;\\'>';\n\tsitetext += jmlib.siteswap.substring(start, stop);\n\tsitetext += '</b>';\n\n\t// last part of string\n\tsitetext += jmlib.siteswap.substring(stop);\n\n\tel.innerHTML = sitetext;\n}\n\nfunction initialize() {\n\tconst args  = getArgs();\n\tlet site    = args.hasOwnProperty('site') ? args.site : '3',\n\t\tstyle   = args.hasOwnProperty('style') ? args.style : 'Normal',\n\t\tpattern = args.hasOwnProperty('pattern') ? args.pattern : null,\n\t\tpattNo  = args.hasOwnProperty('pattno') ? args.pattno : null;\n\n\tif (!validator.validateSite(site)) {\n\t\tsite = '0';\n\t}\n\n\tcanvas = document.getElementById('cv');\n\tctx = canvas.getContext('2d');\n\n\tjmlib.setScalingMethod(jmlib.SCALING_METHOD_DYNAMIC);\n\tjmlib.setWindowSize(canvas.width, canvas.height);\n\n\tif (pattern != null) {\n\t\tPatternLoader.loadPattern(jmlib, pattern);\n\t}\n\telse if (pattNo != null) {\n\t\tPatternLoader.loadPatternEx(jmlib, pattNo);\n\t}\n\telse {\n\t\tjmlib.setPattern(site, site, jmlib.height_ratio, jmlib.dwell_ratio);\n\t\tjmlib.setStyleEx(style);\n\t}\n\n\tjmlib.startJuggle();\n\n\ttimerInterval = 10;\n\ttimerEnabled = true;\n\tsiteonscreenEnabled = true;\n\tloop();\n}\n\ninitialize();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src.js\n **/","/*\n * jmlib-js - Portable JuggleMaster Library (JavaScript Version)\n * Version 2.0\n * (C) Per Johan Groland 2006-2016\n *\n * Based on JMLib 2.0, (C) Per Johan Groland and Gary Briggs\n *\n * Based on JuggleMaster Version 1.60\n * Copyright (c) 1995-1996 Ken Matsuoka\n *\n * You may redistribute and/or modify JMLib_js under the terms of the\n * Modified BSD License as published in various places online or in the\n * COPYING.jmlib file in the package you downloaded.\n *\n * This program is distributed in the hope that it will be useful, but\n * WITHOUT  ANY  WARRANTY;  without   even  the  implied  warranty  of\n * MERCHANTABILITY or  FITNESS FOR A PARTICULAR PURPOSE.   See the\n * Modified BSD License for more details.\n */\n\nvar JMLib = require('./dist/jmlib'),\n\tvalidator = require('./dist/validator');\n\nfunction JuggleMaster() {\n\tthis.jmlib = new JMLib();\n\tthis.validator = validator;\n}\n\nmodule.exports = JuggleMaster;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../index.js\n **/","'use strict';\n\n/*\n * jmlib-js - Portable JuggleMaster Library (JavaScript Version)\n * Version 2.0\n * (C) Per Johan Groland 2006-2016\n *\n * Based on JMLib 2.0, (C) Per Johan Groland and Gary Briggs\n *\n * Based on JuggleMaster Version 1.60\n * Copyright (c) 1995-1996 Ken Matsuoka\n *\n * You may redistribute and/or modify JMLib_js under the terms of the\n * Modified BSD License as published in various places online or in the\n * COPYING.jmlib file in the package you downloaded.\n *\n * This program is distributed in the hope that it will be useful, but\n * WITHOUT  ANY  WARRANTY;  without   even  the  implied  warranty  of\n * MERCHANTABILITY or  FITNESS FOR A PARTICULAR PURPOSE.   See the\n * Modified BSD License for more details.\n */\n\n/* eslint-disable no-var, eqeqeq, no-constant-condition */\nvar Ball = require('./ball'),\n    Arm = require('./arm'),\n    Hand = require('./hand'),\n    validator = require('./validator');\n\n// JMLib class\nfunction JMLib(errorCallback) {\n\tvar i;\n\n\tthis.errorCallback = errorCallback;\n\n\t// public variables\n\tthis.ap = new Arm();\n\tthis.rhand = new Ball();\n\tthis.lhand = new Ball();\n\tthis.handpoly = new Hand();\n\tthis.handpoly_ex = new Hand();\n\n\tthis.b = new Array(JMLib.BMAX);\n\tfor (i = 0; i < JMLib.BMAX; i++) {\n\t\tthis.b[i] = new Ball();\n\t}\n\n\tthis.dpm = 0;\n\tthis.gx_max = 0;\n\tthis.gx_min = 0;\n\tthis.gy_max = 0;\n\tthis.gy_min = 0;\n\tthis.imageWidth = 0;\n\tthis.imageHeight = 0;\n\tthis.status = 0;\n\n\t// protected variables\n\tthis.balln = 0;\n\tthis.bm1 = 0;\n\tthis.arm_x = 0;\n\tthis.arm_y = 0;\n\tthis.hand_x = 0;\n\tthis.hand_y = 0;\n\tthis.horCenter = 0;\n\tthis.verCenter = 0;\n\tthis.styledata = new Array(JMLib.STYLEMAX * 4);\n\tthis.style_len = 0;\n\tthis.ga = 0.0;\n\tthis.dwell_ratio = 0.0;\n\tthis.height_ratio = 0.0;\n\tthis.base = 0;\n\tthis.mirror = 0;\n\tthis.time_count = 0;\n\tthis.time_period = 0;\n\tthis.cSpeed = 0.0;\n\tthis.beep = 0;\n\tthis.syn = 0;\n\tthis.hand_on = 0;\n\tthis.fpu = true;\n\tthis.tw = 0;\n\tthis.aw = 0;\n\tthis.pmax = 0;\n\tthis.lastError = null;\n\n\t//JML_INT32 patt[LMAX][MMAX];\n\tthis.patt = new Array(JMLib.LMAX);\n\tfor (i = 0; i < JMLib.LMAX; i++) {\n\t\tthis.patt[i] = new Array(JMLib.MMAX);\n\t\tfor (var j = 0; j < JMLib.MMAX; j++) {\n\t\t\tthis.patt[i][j] = 0;\n\t\t}\n\t}\n\n\tthis.patts = new Array(JMLib.LMAX);\n\tthis.pattw = 0;\n\tthis.r = new Array(JMLib.LMAX * 2);\n\tthis.smode = 0;\n\tthis.high0 = new Array(JMLib.BMAX + 1);\n\tthis.high = new Array(JMLib.BMAX + 1);\n\tthis.kw0 = 0; // XR/KW [m]\n\n\tthis.siteswap = \"\"; // The current siteswap\n\tthis.pattname = \"\"; // The name of the current pattern\n\tthis.steps = new Array(JMLib.LMAX); // used to print the site on screen\n\tthis.stylename = \"\"; // The name of the current style\n\n\t// Scaling\n\tthis.scalingMethod = 0;\n\tthis.scaleImageWidth = 0;\n\tthis.scaleImageHeight = 0;\n\n\tthis.possible_styles = new Array();\n\tthis.possible_styles[0] = \"Normal\";\n\tthis.possible_styles[1] = \"Reverse\";\n\tthis.possible_styles[2] = \"Shower\";\n\tthis.possible_styles[3] = \"Mills Mess\";\n\tthis.possible_styles[4] = \"Center\";\n\tthis.possible_styles[5] = \"Windmill\";\n\t//this.possible_styles[6] = \"Random\";\n\n\t//this.self = this;\n\n\tthis.initialize();\n}\n\n// Misc. utility functions\nJMLib.max = function (a, b) {\n\tif (a > b) return a;\n\treturn b;\n};\n\nJMLib.min = function (a, b) {\n\tif (a < b) return a;\n\treturn b;\n};\n\nJMLib.jijo = function (x) {\n\treturn x * x;\n};\n\n// Calculates |x|\nJMLib.xabs = function (x) {\n\tif (x < 0) return -x;\n\treturn x;\n};\n\n// Calculates x^y\nJMLib.xpow = function (x, y) {\n\tfor (var i = 0; i < y - 1; i++) {\n\t\tx *= y;\n\t\t//document.write(\"i=\" + i + \" x=\" + x + \"<br>\");\n\t}\n\treturn x;\n};\n\nJMLib.random = function (x) {\n\treturn Math.floor(x * Math.random() % 1);\n};\n\n// For status\nJMLib.ST_NONE = 0;\nJMLib.ST_PAUSE = 1;\nJMLib.ST_JUGGLE = 2;\n\n// Misc. constants\nJMLib.KW = 0.25;\nJMLib.DW = 290; // max of dpm\n\n/* low mem profile\n JMLib.XR = 255;   // Accuracy of x axis, set higher for large screens 255\n JMLib.BMAX = 35;  // max number of balls\n JMLib.MMAX = 11;  // Max multiplex, double+1\n */\n\n// high mem profile\nJMLib.XR = 1024; // Accuracy of x axis, set higher for large screens 255\nJMLib.BMAX = 630; // max number of balls\nJMLib.MMAX = 71; // Max multiplex, double+1\n//\n\nJMLib.LMAX = 76; // max column of a pattern\n\nJMLib.OBJECT_HAND = 0x01;\nJMLib.OBJECT_UNDER = 0x02;\nJMLib.OBJECT_MOVE = 0x04;\nJMLib.OBJECT_MOVE2 = 0x08;\nJMLib.STYLEMAX = 3000; // maximum length of style data\n\nJMLib.JML_MAX_SECTIONLEN = 40;\nJMLib.JML_MAX_NAMELEN = 56;\nJMLib.JML_MAX_SITELEN = 56;\nJMLib.JML_MAX_STYLELEN = 56;\n// high mem profile\n//JMLib.JML_MAX_STYLELEN = 500;\nJMLib.SPEED_MAX = 2.0;\nJMLib.SPEED_MIN = 0.1;\nJMLib.SPEED_DEF = 1.0;\nJMLib.HR_MAX = 1.00;\nJMLib.HR_MIN = 0.04;\nJMLib.HR_DEF = 0.17;\nJMLib.DR_MAX = 0.90;\nJMLib.DR_MIN = 0.10;\nJMLib.DR_DEF = 0.50;\nJMLib.FS_MAX = 10;\nJMLib.FS_MIN = 1;\nJMLib.FS_DEF = 1;\n\n// Scaling methods\nJMLib.SCALING_METHOD_CLASSIC = 1;\nJMLib.SCALING_METHOD_DYNAMIC = 2;\n\nJMLib.prototype.getSiteposStart = function () {\n\tif (this.syn && this.time_period % 2 == 1) {\n\t\treturn this.steps[this.time_period - 1];\n\t}\n\treturn this.steps[this.time_period];\n};\n\nJMLib.prototype.getSiteposStop = function () {\n\tif (this.syn && this.time_period % 2 == 0) {\n\t\treturn this.steps[this.time_period + 2];\n\t}\n\treturn this.steps[this.time_period + 1];\n};\n\nJMLib.prototype.getSiteposLen = function () {\n\treturn this.getSiteposStop() - this.getSiteposStart();\n};\n\nJMLib.prototype.getiterations = function () {\n\treturn this.dpm;\n};\n\nJMLib.prototype.initialize = function () {\n\t// Set default values\n\tthis.ga = 9.8;\n\tthis.dwell_ratio = 0.5;\n\tthis.height_ratio = 0.20;\n\tthis.mirror = 0;\n\tthis.cSpeed = JMLib.SPEED_DEF;\n\tthis.syn = 0;\n\tthis.hand_on = 1;\n\tthis.hand_x = 0;\n\tthis.hand_y = 0;\n\tthis.scalingMethod = JMLib.SCALING_METHOD_CLASSIC;\n\tthis.smode = 50.0;\n\n\tthis.status = JMLib.ST_NONE;\n\n\t//fixme: add random number seed here\n\n\tthis.setWindowSize(480, 400);\n\tthis.setPatternDefault();\n};\n\nJMLib.prototype.shutdown = function () {};\n\nJMLib.prototype.error = function (msg) {\n\tthis.lastError = msg;\n\n\tif (this.errorCallback) {\n\t\tthis.errorCallback(msg);\n\t}\n};\n\nJMLib.prototype.setWindowSizeDefault = function () {\n\tthis.setWindowSize(480, 400);\n};\n\nJMLib.prototype.setWindowSize = function (width, height) {\n\tif (width <= 0 || height <= 0) return false;\n\n\tif (this.scalingMethod == JMLib.SCALING_METHOD_DYNAMIC) {\n\t\tthis.scaleImageWidth = width;\n\t\tthis.scaleImageHeight = height;\n\t\treturn true;\n\t}\n\n\t// store current status and stop juggling\n\tvar oldStatus = this.status;\n\tthis.stopJuggle();\n\n\t// set size\n\tthis.imageWidth = width;\n\tthis.imageHeight = height;\n\tthis.horCenter = parseInt(this.imageWidth / 2);\n\tthis.verCenter = parseInt(this.imageHeight / 2);\n\n\t// recalculate pattern\n\tif (oldStatus != JMLib.ST_NONE) this.startJuggle();\n\n\t// restore state\n\tthis.status = oldStatus;\n\n\treturn true;\n};\n\nJMLib.prototype.setScalingMethod = function (scalingMethod) {\n\t// no change\n\tif (this.scalingMethod == scalingMethod) return;\n\n\tif (scalingMethod == JMLib.SCALING_METHOD_DYNAMIC) {\n\t\tthis.scaleImageWidth = this.imageWidth;\n\t\tthis.scaleImageHeight = this.imageHeight;\n\t\tthis.setWindowSizeDefault();\n\t\tthis.scalingMethod = JMLib.SCALING_METHOD_DYNAMIC;\n\t} else {\n\t\t//SCALING_METHOD_CLASSIC\n\t\tthis.calingMethod = JMLib.SCALING_METHOD_CLASSIC;\n\t\tthis.setWindowSize(this.scaleImageWidth, this.scaleImageHeight);\n\t}\n};\n\nJMLib.prototype.SCALING_METHOD_CLASSIC = JMLib.SCALING_METHOD_CLASSIC;\nJMLib.prototype.SCALING_METHOD_DYNAMIC = JMLib.SCALING_METHOD_DYNAMIC;\n\nJMLib.prototype.getImageWidth = function () {\n\tif (this.scalingMethod == JMLib.SCALING_METHOD_CLASSIC) return this.imageWidth;else // SCALING_METHOD_DYNAMIC\n\t\treturn this.scaleImageWidth;\n};\n\nJMLib.prototype.getImageHeight = function () {\n\tif (this.scalingMethod == JMLib.SCALING_METHOD_CLASSIC) return this.imageHeight;else // SCALING_METHOD_DYNAMIC\n\t\treturn this.scaleImageHeight;\n};\n\nJMLib.prototype.getBallRadius = function () {\n\tvar baseRadius = parseInt(11 * this.dpm / JMLib.DW);\n\n\tif (this.scalingMethod == JMLib.SCALING_METHOD_CLASSIC) {\n\t\treturn baseRadius;\n\t} else {\n\t\tvar zoomFactorY = this.scaleImageHeight / this.imageHeight;\n\t\tzoomFactorY *= 0.9;\n\n\t\tif (this.scaleImageWidth < this.scaleImageHeight) zoomFactorY *= this.scaleImageWidth / this.scaleImageHeight;\n\n\t\treturn parseInt(baseRadius * zoomFactorY); // convert return value to int\n\t}\n};\n\nJMLib.prototype.doCoordTransform = function () {\n\tvar i;\n\tvar zoomFactorX = this.scaleImageWidth / this.imageWidth;\n\tvar zoomFactorY = this.scaleImageHeight / this.imageHeight;\n\n\t// adjust for aspect ratio\n\tif (this.scaleImageWidth < this.scaleImageHeight) zoomFactorY *= this.scaleImageWidth / this.scaleImageHeight;else zoomFactorX *= this.scaleImageHeight / this.scaleImageWidth;\n\n\tzoomFactorX *= 1.1;\n\tzoomFactorY *= 0.9;\n\n\t// Adjust coordinates\n\t// head\n\tthis.ap.hx -= parseInt(this.imageWidth / 2);\n\tthis.ap.hy -= parseInt(this.imageHeight / 2);\n\n\tthis.ap.hx = parseInt(this.ap.hx * zoomFactorX);\n\tthis.ap.hy = parseInt(this.ap.hy * zoomFactorY);\n\tthis.ap.hr = parseInt(this.ap.hr * zoomFactorY);\n\n\tthis.ap.hx += parseInt(this.scaleImageWidth / 2);\n\tthis.ap.hy += parseInt(this.scaleImageHeight / 2);\n\n\t// juggler\n\tfor (i = 0; i < 6; i++) {\n\t\tthis.ap.rx[i] -= parseInt(this.imageWidth / 2);\n\t\tthis.ap.ry[i] -= parseInt(this.imageHeight / 2);\n\t\tthis.ap.rx[i] = parseInt(this.ap.rx[i] * zoomFactorX);\n\t\tthis.ap.ry[i] = parseInt(this.ap.ry[i] * zoomFactorY);\n\t\tthis.ap.rx[i] += parseInt(this.scaleImageWidth / 2);\n\t\tthis.ap.ry[i] += parseInt(this.scaleImageHeight / 2);\n\n\t\tthis.ap.lx[i] -= parseInt(this.imageWidth / 2);\n\t\tthis.ap.ly[i] -= parseInt(this.imageHeight / 2);\n\t\tthis.ap.lx[i] = parseInt(this.ap.lx[i] * zoomFactorX);\n\t\tthis.ap.ly[i] = parseInt(this.ap.ly[i] * zoomFactorY);\n\t\tthis.ap.lx[i] += parseInt(this.scaleImageWidth / 2);\n\t\tthis.ap.ly[i] += parseInt(this.scaleImageHeight / 2);\n\t}\n\n\t// hands\n\tthis.rhand.gx -= parseInt(this.imageWidth / 2);\n\tthis.rhand.gy -= parseInt(this.imageHeight / 2);\n\tthis.rhand.gx = parseInt(this.rhand.gx * zoomFactorX);\n\tthis.rhand.gy = parseInt(this.rhand.gy * zoomFactorY);\n\tthis.rhand.gx += parseInt(this.scaleImageWidth / 2);\n\tthis.rhand.gy += parseInt(this.scaleImageHeight / 2);\n\n\tthis.lhand.gx -= parseInt(this.imageWidth / 2);\n\tthis.lhand.gy -= parseInt(this.imageHeight / 2);\n\tthis.lhand.gx = parseInt(this.lhand.gx * zoomFactorX);\n\tthis.lhand.gy = parseInt(this.lhand.gy * zoomFactorY);\n\tthis.lhand.gx += parseInt(this.scaleImageWidth / 2);\n\tthis.lhand.gy += parseInt(this.scaleImageHeight / 2);\n\n\tfor (i = 0; i <= 9; i++) {\n\t\tthis.handpoly.rx[i] = parseInt(this.handpoly_ex.rx[i] * zoomFactorX);\n\t\tthis.handpoly.ry[i] = parseInt(this.handpoly_ex.ry[i] * zoomFactorY);\n\t\tthis.handpoly.lx[i] = parseInt(this.handpoly_ex.lx[i] * zoomFactorX);\n\t\tthis.handpoly.ly[i] = parseInt(this.handpoly_ex.ly[i] * zoomFactorY);\n\t}\n\n\t// balls\n\tfor (i = this.numBalls() - 1; i >= 0; i--) {\n\t\tthis.b[i].gx -= parseInt(this.imageWidth / 2);\n\t\tthis.b[i].gy -= parseInt(this.imageHeight / 2);\n\n\t\tthis.b[i].gx = parseInt(this.b[i].gx * zoomFactorX);\n\t\tthis.b[i].gy = parseInt(this.b[i].gy * zoomFactorY);\n\n\t\tthis.b[i].gx += parseInt(this.scaleImageWidth / 2);\n\t\tthis.b[i].gy += parseInt(this.scaleImageHeight / 2);\n\t}\n};\n\nJMLib.prototype.setMirror = function (mir) {\n\t// store current status and stop juggling\n\tvar oldStatus = this.status;\n\tthis.stopJuggle();\n\n\t// set mirror\n\tthis.mirror = mir;\n\n\t// recalculate pattern\n\tif (oldStatus != JMLib.ST_NONE) JMLib.prototype.startJuggle();\n\n\t// restore state\n\tthis.status = oldStatus;\n};\n\nJMLib.prototype.setPattern = function (name, site, hr, dr) {\n\tif (site.length > JMLib.JML_MAX_SITELEN) {\n\t\tthis.error(\"Siteswap too long\");\n\t\treturn false;\n\t}\n\n\tif (name.length > JMLib.JML_MAX_NAMELEN) {\n\t\tthis.error(\"Pattern name too long\");\n\t\treturn false;\n\t}\n\n\tif (!validator.validateSite(site)) {\n\t\tthis.error(\"Invalid siteswap\");\n\t\treturn false;\n\t}\n\n\tthis.siteswap = site;\n\tthis.pattname = name;\n\tthis.height_ratio = hr;\n\tthis.dwell_ratio = dr;\n\n\t// Turn off beep\n\tthis.beep = 0;\n\n\t// Check ratios\n\tif (this.height_ratio < JMLib.HR_MIN || this.height_ratio > JMLib.HR_MAX) this.height_ratio = JMLib.HR_DEF;\n\tif (this.dwell_ratio < JMLib.DR_MIN || this.dwell_ratio > JMLib.DR_MAX) this.dwell_ratio = JMLib.DR_DEF;\n\n\t// Set pattern\n\tif ((this.jml_errno = this.set_patt(site)) == 0) {\n\t\tthis.doStepcalc();\n\t\treturn true;\n\t} else {\n\t\tswitch (this.jml_errno) {\n\t\t\tcase 4:\n\t\t\t\tthis.error(\"Syntax error\");\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tthis.error(\"Invalid pattern\");\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tthis.error(\"Invalid character in pattern\");\n\t\t\t\tbreak;\n\t\t\tcase 7:\n\t\t\t\tthis.error(\"Synchronous number must be even\");\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\tthis.error(\"Max 6 balls may be multiplexed\");\n\t\t\t\tbreak;\n\t\t\tcase 9:\n\t\t\t\tthis.error(\"Too many balls in pattern\");\n\t\t\t\tbreak;\n\t\t\tcase 10:\n\t\t\t\tthis.error(\"Pattern too long\");\n\t\t\t\tbreak;\n\t\t\tcase 13:\n\t\t\t\tthis.error(\"0 inside [] is invalid\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.error(\"Unexpected error\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn false;\n\t}\n};\n\nJMLib.prototype.setStyle = function (name, length, data) {\n\tif (data.length > JMLib.JML_MAX_STYLELEN) {\n\t\tthis.error(\"Style too large\");\n\t\treturn false;\n\t}\n\n\tif (name.length > JMLib.JML_MAX_NAMELEN) {\n\t\tthis.error(\"Style name too long\");\n\t\treturn false;\n\t}\n\n\tthis.stylename = name;\n\tthis.styledata = data;\n\tthis.style_len = length;\n\n\treturn true;\n};\n\n//fixme: style data is passed as an array\n//       should perhaps add a style data class\nJMLib.prototype.setStyleEx = function (name) {\n\tvar style;\n\n\tif (name == \"Normal\") {\n\t\tstyle = new Array(13, 0, 4, 0);\n\t\tthis.setStyle(name, 1, style);\n\t} else if (name == \"Reverse\") {\n\t\tstyle = new Array(4, 0, 13, 0);\n\t\tthis.setStyle(name, 1, style);\n\t} else if (name == \"Shower\") {\n\t\tstyle = new Array(5, 0, 10, 0, 10, 0, 5, 0);\n\t\tthis.setStyle(name, 2, style);\n\t} else if (name == \"Mills Mess\") {\n\t\tstyle = new Array(-1, 0, -12, 0, 0, 0, 12, 0, 1, 0, -12, 0);\n\t\tthis.setStyle(name, 3, style);\n\t} else if (name == \"Center\") {\n\t\tstyle = new Array(13, 0, 0, 0);\n\t\tthis.setStyle(name, 1, style);\n\t} else if (name == \"Windmill\") {\n\t\tstyle = new Array(10, 0, -8, 0, -8, 0, 10, 0);\n\t\tthis.setStyle(name, 2, style);\n\t}\n\t// placeholder for adding random style support here\n\telse {\n\t\t\t// anything else is interpreted as \"Normal\"\n\t\t\tthis.setStyleDefault();\n\t\t}\n\n\treturn true;\n};\n\nJMLib.prototype.getStyles = function () {\n\treturn this.possible_styles;\n};\n\nJMLib.prototype.numStyles = function () {\n\treturn this.possible_styles.length;\n};\n\nJMLib.prototype.setPatternDefault = function () {\n\tthis.setPattern(\"3 Cascade\", \"3\", JMLib.HR_DEF, JMLib.DR_DEF);\n\tthis.setStyleDefault();\n};\n\nJMLib.prototype.setStyleDefault = function () {\n\tvar defStyle = new Array(13, 0, 4, 0);\n\t//this.setStyle(\"Normal\", 1, defStyle);\n\tthis.stylename = \"Normal\";\n\tthis.styledata = defStyle;\n\tthis.style_len = 1;\n};\n\nJMLib.prototype.setHR = function (HR) {\n\tif (HR > JMLib.HR_MAX) {\n\t\tthis.height_ratio = JMLib.HR_MAX;\n\t} else if (HR < JMLib.HR_MIN) {\n\t\tthis.height_ratio = JMLib.HR_MIN;\n\t} else {\n\t\tthis.height_ratio = HR;\n\t}\n};\n\nJMLib.prototype.getHR = function () {\n\treturn this.height_ratio;\n};\n\nJMLib.prototype.setDR = function (DR) {\n\tif (DR > JMLib.DR_MAX) {\n\t\tthis.dwell_ratio = JMLib.DR_MAX;\n\t} else if (DR < JMLib.DR_MIN) {\n\t\tthis.dwell_ratio = JMLib.DR_MIN;\n\t} else {\n\t\tthis.dwell_ratio = DR;\n\t}\n};\n\nJMLib.prototype.getDR = function () {\n\treturn this.dwell_ratio;\n};\n\nJMLib.prototype.numBalls = function () {\n\treturn this.balln;\n};\n\n// Internal functions\nJMLib.prototype.arm_line = function () {\n\tvar mx, my, sx, sy;\n\n\tif (this.hand_on) {\n\t\t// only bother calculating if hands are drawn\n\t\t// Notes:\n\t\t//  * gx/gy may need to be replaced by gx0/gy0 if erasing old values\n\t\t//    the method used in the X11 version\n\t\t//  * JMWin uses 11*dpm/DW instead of 11, which causes incorrect\n\t\t//    hand placement for some reason.\n\t\tthis.ap.rx[0] = this.rhand.gx + 11 + this.arm_x;\n\t\tthis.ap.ry[0] = this.rhand.gy + 11 + this.arm_y;\n\t\tthis.ap.lx[0] = this.lhand.gx + 11 - this.arm_x;\n\t\tthis.ap.ly[0] = this.lhand.gy + 11 + this.arm_y;\n\n\t\tsx = parseInt(this.dpm * JMLib.XR / this.kw0);\n\t\tsy = this.base - parseInt(this.dpm / 3);\n\n\t\tthis.ap.rx[1] = parseInt((this.ap.rx[0] + (this.horCenter + sx) * 2) / 3 + this.dpm / 12);\n\t\tthis.ap.lx[1] = parseInt((this.ap.lx[0] + (this.horCenter - sx) * 2) / 3 - this.dpm / 12);\n\t\tthis.ap.ry[1] = parseInt((this.ap.ry[0] + sy) / 2 + this.dpm / 8);\n\t\tthis.ap.ly[1] = parseInt((this.ap.ly[0] + sy) / 2 + this.dpm / 8);\n\n\t\tthis.ap.rx[2] = parseInt((this.ap.rx[1] + (this.horCenter + sx) * 3) / 4);\n\t\tthis.ap.lx[2] = parseInt((this.ap.lx[1] + (this.horCenter - sx) * 3) / 4);\n\t\tthis.ap.ry[2] = parseInt((this.ap.ry[1] + sy * 2) / 3 - this.dpm / 25);\n\t\tthis.ap.ly[2] = parseInt((this.ap.ly[1] + sy * 2) / 3 - this.dpm / 25);\n\n\t\tthis.ap.rx[3] = parseInt((this.ap.rx[2] + (this.horCenter + sx) * 2) / 3 - this.dpm / 13);\n\t\tthis.ap.lx[3] = parseInt((this.ap.lx[2] + (this.horCenter - sx) * 2) / 3 + this.dpm / 13);\n\t\tthis.ap.ry[3] = parseInt((this.ap.ry[2] + sy * 2) / 3 - this.dpm / 40);\n\t\tthis.ap.ly[3] = parseInt((this.ap.ly[2] + sy * 2) / 3 - this.dpm / 40);\n\n\t\tmx = (this.ap.rx[3] + this.ap.lx[3]) / 2;\n\t\tmy = (this.ap.ry[3] + this.ap.ly[3]) / 2;\n\n\t\tthis.ap.rx[4] = parseInt((mx * 2 + this.ap.rx[3]) / 3);\n\t\tthis.ap.lx[4] = parseInt((mx * 2 + this.ap.lx[3]) / 3);\n\t\tthis.ap.ry[4] = parseInt((my * 2 + this.ap.ry[3]) / 3);\n\t\tthis.ap.ly[4] = parseInt((my * 2 + this.ap.ly[3]) / 3);\n\n\t\tthis.ap.hx = parseInt(mx);\n\t\tthis.ap.hy = parseInt((my * 2 - this.dpm * 2 / 3 + this.base) / 3);\n\t\tthis.ap.hr = parseInt(this.dpm / 11);\n\n\t\tthis.ap.rx[5] = this.ap.hx + parseInt(this.dpm / 20);\n\t\tthis.ap.lx[5] = this.ap.hx - parseInt(this.dpm / 20);\n\t\tthis.ap.ry[5] = this.ap.hy + parseInt(this.dpm / 13);\n\t\tthis.ap.ly[5] = parseInt(this.ap.ry[5]);\n\t}\n};\n\nJMLib.prototype.applyCorrections = function () {\n\t// Correct ball coordinates\n\tfor (var i = this.balln - 1; i >= 0; i--) {\n\t\tthis.b[i].gx += this.bm1;\n\t\tthis.b[i].gy += this.bm1;\n\t}\n};\n\nJMLib.prototype.hand_pos = function (c, h, x, z) {\n\t//fixme: for testing only, remove\n\t// x and z must be arrays with one element (pass-by-reference emulation)\n\t//if (!(x instanceof Array)) document.write(\"hand_pos assert failure (x)<br>\");\n\t//if (!(z instanceof Array)) document.write(\"hand_pos assert failure (z)<br>\");\n\n\tvar a;\n\n\tif (this.mirror) {\n\t\tif (!this.syn && h) c--;\n\t\tif (c & 1) a = (--c + h) % this.style_len * 4 + 2;else a = (c + h) % this.style_len * 4;\n\t} else {\n\t\tif (!this.syn && !h) c--;\n\t\tif (c & 1) a = (c - h) % this.style_len * 4 + 2;else a = (c + 1 - h) % this.style_len * 4;\n\t}\n\n\tif (h) x[0] = this.styledata[a];else x[0] = -this.styledata[a];\n\n\tz[0] = this.styledata[a + 1];\n};\n\nJMLib.prototype.juggle = function ( /*Ball*/d) {\n\tvar tp;\n\tvar flag = 0;\n\tvar h, t;\n\tvar tpox = new Array(1);\n\ttpox[0] = 0;\n\tvar rpox = new Array(1);\n\trpox[0] = 0;\n\tvar tpoz = new Array(1);\n\ttpoz[0] = 0;\n\tvar rpoz = new Array(1);\n\trpoz[0] = 0;\n\tvar x = 0;\n\tvar y = 0;\n\n\t// Save old values\n\td.gx1 = d.gx0;\n\td.gy1 = d.gy0;\n\n\td.gx0 = d.gx;\n\td.gy0 = d.gy;\n\n\tif (d.c < 0) {\n\t\tif (this.time_count >= -d.c * this.tw) d.c = -d.c;\n\t}\n\n\twhile (true) {\n\t\ttp = this.time_count - this.tw * JMLib.xabs(d.c);\n\t\tif (tp < this.aw) break;\n\t\td.st &= ~JMLib.OBJECT_UNDER;\n\t\td.c0 = d.c;\n\n\t\tif (d.st & JMLib.OBJECT_HAND) {\n\t\t\td.c += 2;\n\t\t\tthis.flag = 1;\n\t\t} else {\n\t\t\tt = d.c;\n\n\t\t\tif (this.syn) {\n\t\t\t\tif (this.mirror && !d.chand) t++;else if (!this.mirror && d.chand) t++;\n\t\t\t}\n\n\t\t\tt %= this.pattw;\n\t\t\td.bh = this.patt[t][this.r[t]];\n\t\t\td.c += JMLib.xabs(d.bh);\n\t\t\tif (++this.r[t] >= this.patts[t]) this.r[t] = 0;\n\n\t\t\td.thand = d.chand;\n\t\t\tif (d.bh & 1 || d.bh < 0) d.chand = 1 - d.chand;\n\n\t\t\tflag = 1;\n\t\t}\n\t}\n\n\tif (d.c >= 0 && tp >= 0 && !(d.st & JMLib.OBJECT_UNDER)) {\n\t\td.st |= JMLib.OBJECT_UNDER;\n\n\t\tif (d.st & JMLib.OBJECT_HAND) {\n\t\t\tif (d.st & JMLib.OBJECT_MOVE2) {\n\t\t\t\td.st |= JMLib.OBJECT_MOVE;\n\t\t\t\td.st &= ~JMLib.OBJECT_MOVE2;\n\t\t\t} else {\n\t\t\t\td.st &= ~JMLib.OBJECT_MOVE;\n\t\t\t}\n\t\t} else {\n\t\t\tt = d.c;\n\n\t\t\tif (this.syn) {\n\t\t\t\tif (this.mirror && !d.chand) t++;else if (!this.mirror && d.chand) t++;\n\t\t\t}\n\n\t\t\tt %= this.pattw;\n\n\t\t\tif (d.bh == 1) d.st |= JMLib.OBJECT_MOVE;else d.st &= ~JMLib.OBJECT_MOVE;\n\n\t\t\tfor (var i = 0; i < this.patts[t]; i++) {\n\t\t\t\th = this.patt[t][i];\n\t\t\t\tif (h == 1) {\n\t\t\t\t\tif (d.chand) this.lhand.st |= JMLib.OBJECT_MOVE2;else this.rhand.st |= JMLib.OBJECT_MOVE2;\n\t\t\t\t}\n\t\t\t\tif (h != 2) {\n\t\t\t\t\tif (d.chand) this.rhand.st |= JMLib.OBJECT_MOVE2;else this.lhand.st |= JMLib.OBJECT_MOVE2;\n\t\t\t\t\td.st |= JMLib.OBJECT_MOVE;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!(d.st & JMLib.OBJECT_MOVE)) {\n\t\tif (d.c < 0) {\n\t\t\t//opera.postError(\"BEFORE hand_pos(\" + -d.c + \", \" + d.chand + \", \" + tpox[0] + \", \" + tpoz[0] + \")\");\n\t\t\tthis.hand_pos(-d.c, d.chand, tpox, tpoz);\n\t\t\t//opera.postError(\"AFTER hand_pos(\" + -d.c + \", \" + d.chand + \", \" + tpox[0] + \", \" + tpoz[0] + \")\");\n\t\t\trpox[0] = tpox[0];\n\t\t\trpoz[0] = tpoz[0];\n\t\t} else {\n\t\t\tif (d.st & JMLib.OBJECT_UNDER) {\n\t\t\t\t//opera.postError(\"BEFORE hand_pos(\" + d.c + \", \" + d.chand + \", \" + tpox[0] + \", \" + tpoz[0] + \")\");\n\t\t\t\tthis.hand_pos(d.c, d.chand, tpox, tpoz);\n\t\t\t\t//opera.postError(\"AFTER hand_pos(\" + d.c + \", \" + d.chand + \", \" + tpox[0] + \", \" + tpoz[0] + \")\");\n\n\t\t\t\t//opera.postError(\"BEFORE hand_pos(\" + (d.c + 2) + \", \" + d.chand + \", \" + rpox[0] + \", \" + rpoz[0] + \")\");\n\t\t\t\tthis.hand_pos(d.c + 2, d.chand, rpox, rpoz);\n\t\t\t\t//opera.postError(\"AFTER hand_pos(\" + (d.c + 2) + \", \" + d.chand + \", \" + rpox[0] + \", \" + rpoz[0] + \")\");\n\n\t\t\t\tif (tpox[0] != rpox[0] || tpoz[0] != rpoz[0]) {\n\t\t\t\t\tthis.hand_pos(d.c + 1, d.chand, rpox, rpoz);\n\t\t\t\t\tif (tpox[0] != rpox[0] || tpoz[0] != rpoz[0]) d.st |= JMLib.OBJECT_MOVE;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.hand_pos(d.c - 2, d.chand, tpox, tpoz);\n\t\t\t\tthis.hand_pos(d.c, d.chand, rpox, rpoz);\n\t\t\t\tif (tpox[0] != rpox[0] || tpoz[0] != rpoz[0]) {\n\t\t\t\t\tthis.hand_pos(d.c - 1, d.chand, tpox, tpoz);\n\t\t\t\t\tif (tpox[0] != rpox[0] || tpoz[0] != rpoz[0]) d.st |= JMLib.OBJECT_MOVE;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (d.st & JMLib.OBJECT_MOVE) {\n\t\tif (d.bh == 1) {\n\t\t\tthis.hand_pos(d.c0 + 1, d.thand, tpox, tpoz);\n\t\t\tthis.hand_pos(d.c + 1, d.chand, rpox, rpoz);\n\t\t} else if (d.st & JMLib.OBJECT_UNDER) {\n\t\t\tthis.hand_pos(d.c, d.chand, tpox, tpoz);\n\t\t\tthis.hand_pos(d.c + 1, d.chand, rpox, rpoz);\n\t\t} else {\n\t\t\tthis.hand_pos(d.c0 + 1, d.thand, tpox, tpoz);\n\t\t\tthis.hand_pos(d.c, d.chand, rpox, rpoz);\n\t\t}\n\t}\n\n\tif (this.fpu) {\n\t\tvar fx;\n\n\t\tif (!(d.st & JMLib.OBJECT_HAND) && d.c < 0) {\n\t\t\tif (tpox[0] == 0) {\n\t\t\t\tfx = 0;\n\t\t\t\ty = parseInt(tpoz[0] * this.dpm / 20 - tp * this.dpm / 12 / this.tw);\n\t\t\t\t//opera.postError(\"x=\" + x + \", y=\" + y);\n\t\t\t\t//opera.postError(y, tpoz[0], this.dpm, tp, this.dpm, this.tw);\n\t\t\t} else {\n\t\t\t\t\tif (tpox[0] > 0) fx = tpox[0] / 10 - tp / 6 / this.tw;else fx = tpox[0] / 10 + tp / 6 / this.tw;\n\t\t\t\t\ty = parseInt(tpoz[0] * this.dpm / 20);\n\t\t\t\t}\n\t\t} else if (!(d.st & JMLib.OBJECT_MOVE)) {\n\t\t\tfx = tpox[0] / 10;\n\t\t\ty = tpoz[0] * this.dpm / 20;\n\t\t} else {\n\t\t\tif (d.bh == 1) {\n\t\t\t\tfx = (tp - this.aw) / this.tw * 2 + 1;\n\t\t\t\ty = parseInt(this.high[1] * (1 - JMLib.jijo(fx)));\n\t\t\t} else if (d.st & JMLib.OBJECT_UNDER) {\n\t\t\t\tfx = tp / this.aw * 2 - 1;\n\t\t\t\ty = parseInt(this.high[0] * (1 - JMLib.jijo(fx)));\n\t\t\t} else {\n\t\t\t\tfx = tp / (this.tw * JMLib.xabs(d.bh) - this.aw) * 2 + 1;\n\t\t\t\ty = parseInt(this.high[JMLib.xabs(d.bh)] * (1 - JMLib.jijo(fx)));\n\t\t\t}\n\n\t\t\ty += parseInt((fx * (rpoz[0] - tpoz[0]) + rpoz[0] + tpoz[0]) * this.dpm / 40);\n\t\t\td.t = fx; // spin\n\t\t\tfx = (fx * (rpox[0] - tpox[0]) + rpox[0] + tpox[0]) / 20;\n\t\t}\n\n\t\tx = parseInt(fx * this.dpm * JMLib.KW);\n\t} else {\n\t\tif (!(d.st & JMLib.OBJECT_HAND) && d.c < 0) {\n\t\t\tif (tpox[0] == 0) {\n\t\t\t\tx = 0;\n\t\t\t\ty = parseInt(tpoz[0] * this.dpm / 20 - tp * this.dpm / 12 / this.tw);\n\t\t\t} else {\n\t\t\t\tif (tpox[0] > 0) x = parseInt(JMLib.XR * tpox[0] / 10 - JMLib.XR * tp / 6 / this.tw);else x = parseInt(JMLib.XR * tpox[0] / 10 + JMLib.XR * tp / 6 / this.tw);\n\t\t\t\ty = parseInt(tpoz[0] * this.dpm / 20);\n\t\t\t}\n\t\t} else if (!(d.st & JMLib.OBJECT_MOVE)) {\n\t\t\tx = parseInt(JMLib.XR * tpox[0] / 10);\n\t\t\ty = parseInt(tpoz[0] * this.dpm / 20);\n\t\t} else {\n\t\t\tif (d.bh == 1) {\n\t\t\t\tx = parseInt(JMLib.XR * (tp - this.aw) * 2 / this.tw + JMLib.XR);\n\t\t\t\ty = parseInt((JMLib.jijo(JMLib.XR) - JMLib.jijo(x)) / this.high0[1]);\n\t\t\t} else if (d.st & JMLib.OBJECT_UNDER) {\n\t\t\t\tx = parseInt(JMLib.XR * tp * 2 / this.aw - JMLib.XR);\n\t\t\t\ty = parseInt((JMLib.jijo(JMLib.XR) - JMLib.jijo(x)) / this.high0[0]);\n\t\t\t} else {\n\t\t\t\tx = parseInt(JMLib.XR * tp * 2 / (this.tw * JMLib.xabs(d.bh) - this.aw) + JMLib.XR);\n\t\t\t\ty = parseInt((JMLib.jijo(JMLib.XR) - JMLib.jijo(x)) / this.high0[JMLib.xabs(d.bh)]);\n\t\t\t}\n\n\t\t\ty += parseInt((x * (rpoz[0] - tpoz[0]) + JMLib.XR * (rpoz[0] + tpoz[0])) * this.dpm / JMLib.XR / 40);\n\t\t\tx = parseInt((x * (rpox[0] - tpox[0]) + JMLib.XR * (rpox[0] + tpox[0])) / 20);\n\t\t}\n\n\t\tx = parseInt(x * this.dpm / this.kw0);\n\t}\n\n\t// NOTE:\n\t//  * The alternative calulations of d->gx and gy below are\n\t//    from JMWin. They cause the entire pattern to be skewed.\n\n\t//opera.postError(d);\n\n\td.gx = this.horCenter + x - 11;\n\t//d->gx=horCenter + x - 11 * dpm / DW;\n\t//opera.postError(d);\n\t//opera.postError(\"hand_x=\" + this.hand_x + \" hand_y=\" + this.hand_y);\n\n\tif (d.st & JMLib.OBJECT_HAND) {\n\t\tif (d.chand) d.gx += this.hand_x;else d.gx -= this.hand_x;\n\t\ty -= this.hand_y;\n\t}\n\n\td.gy = this.base - y - 11;\n\t//d->gy = base - y - 11 * dpm / DW;\n\n\treturn flag;\n};\n\nJMLib.prototype.set_ini = function (rr) {\n\tvar i, j;\n\tvar tw0;\n\tvar aw0;\n\n\tthis.balln = 0;\n\tthis.pmax = 0;\n\n\tif (this.pattw > JMLib.LMAX) return 10;\n\n\tif (this.pattw == 0) return 1;\n\n\tfor (i = 0; i < this.pattw; i++) {\n\t\tfor (j = 0; j < this.patts[i]; j++) {\n\t\t\tthis.balln += JMLib.xabs(this.patt[i][j]);\n\t\t\tthis.pmax = JMLib.max(this.pmax, JMLib.xabs(this.patt[i][j]));\n\t\t}\n\t}\n\n\tif (this.balln % this.pattw) return 5;\n\tthis.balln = parseInt(this.balln / this.pattw);\n\tif (this.balln == 0) return 9;\n\tif (this.balln > JMLib.BMAX) return 9;\n\n\tfor (i = 0; i < JMLib.LMAX * 2; i++) {\n\t\tthis.r[i] = 0;\n\t}for (i = 0; i <= this.balln; i++) {\n\t\tj = 0;\n\t\twhile (this.r[j] == this.patts[j % this.pattw] && j < this.pattw + this.pmax) {\n\t\t\tj++;\n\t\t}if (i == this.balln) {\n\t\t\tif (j == this.pattw + this.pmax) break;else return 5;\n\t\t}\n\n\t\tthis.b[i].st = 0;\n\n\t\tif (this.mirror) {\n\t\t\tif ((j + this.syn) % 2) {\n\t\t\t\tthis.b[i].thand = 1;\n\t\t\t\tthis.b[i].chand = 1;\n\t\t\t} else {\n\t\t\t\tthis.b[i].thand = 0;\n\t\t\t\tthis.b[i].chand = 0;\n\t\t\t}\n\t\t} else {\n\t\t\tif ((j + this.syn) % 2) {\n\t\t\t\tthis.b[i].thand = 0;\n\t\t\t\tthis.b[i].chand = 0;\n\t\t\t} else {\n\t\t\t\tthis.b[i].thand = 1;\n\t\t\t\tthis.b[i].chand = 1;\n\t\t\t}\n\t\t}\n\n\t\tif (this.syn) this.b[i].c = -parseInt(j / 2) * 2;else this.b[i].c = -j;\n\n\t\twhile (j < this.pattw + this.pmax) {\n\t\t\tif (this.r[j] == this.patts[j % this.pattw]) return 5;else this.r[j]++;\n\t\t\tvar k = this.patt[j % this.pattw][this.patts[j % this.pattw] - this.r[j]];\n\n\t\t\tif (this.syn && k < 0) {\n\t\t\t\tif (j % 2 == 0) j += -k + 1;else j += -k - 1;\n\t\t\t} else {\n\t\t\t\tj += k;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (rr == 0) return 0;\n\n\tif (this.pmax < 3) this.pmax = 3;\n\n\ttw0 = Math.sqrt(2 / this.ga * this.pmax * this.height_ratio) * 2 / (this.pmax - this.dwell_ratio * 2) * this.smode / this.cSpeed;\n\tthis.tw = parseInt(this.fadd(tw0, 0, 0));\n\tif (this.tw == 0) return 15;\n\taw0 = tw0 * this.dwell_ratio * 2;\n\tthis.aw = parseInt(this.fadd(aw0, 0, 0));\n\tif (this.aw < 1) this.aw = 1;\n\tif (this.aw > this.tw * 2 - 1) this.aw = this.tw * 2 - 1;\n\n\tthis.kw0 = parseInt(JMLib.XR / JMLib.KW);\n\n\tif (this.fpu) {\n\t\tthis.high[0] = -0.2 * this.dpm;\n\t\tthis.high[1] = this.ga * JMLib.jijo(tw0 / this.smode * this.cSpeed) / 8 * this.dpm;\n\t\tfor (i = 2; i <= this.pmax; i++) {\n\t\t\tthis.high[i] = this.ga * JMLib.jijo((tw0 * i - aw0) / this.smode * this.cSpeed) / 8 * this.dpm;\n\t\t}\n\t} else {\n\t\tthis.high0[0] = parseInt(-JMLib.jijo(JMLib.XR) / 0.2 * this.dpm);\n\t\tthis.high0[1] = parseInt(JMLib.jijo(JMLib.XR) / (this.ga * JMLib.jijo(tw0 / this.smode * this.cSpeed) / 8 * this.dpm));\n\t\tfor (i = 2; i <= this.pmax; i++) {\n\t\t\tthis.high0[i] = parseInt(JMLib.jijo(JMLib.XR) / (this.ga * JMLib.jijo((tw0 * i - aw0) / this.smode * this.cSpeed) / 8 * this.dpm));\n\t\t}\n\t}\n\n\tfor (i = 0; i < this.balln; i++) {\n\t\tthis.b[i].bh = 0;\n\t\tthis.b[i].gx = this.horCenter;\n\t\tthis.b[i].gy = this.verCenter;\n\t\tthis.b[i].gx0 = this.horCenter;\n\t\tthis.b[i].gy0 = this.verCenter;\n\t\tthis.b[i].gx1 = this.horCenter;\n\t\tthis.b[i].gy1 = this.verCenter;\n\t}\n\n\tif (this.mirror) {\n\t\tthis.lhand.c = 0;\n\t\tif (this.syn) this.rhand.c = 0;else this.rhand.c = -1;\n\t} else {\n\t\tthis.rhand.c = 0;\n\t\tif (this.syn) this.lhand.c = 0;else this.lhand.c = -1;\n\t}\n\n\tthis.rhand.bh = 2;\n\tthis.rhand.st = JMLib.OBJECT_HAND;\n\tthis.rhand.thand = 1;\n\tthis.rhand.chand = 1;\n\tthis.rhand.gx = this.horCenter;\n\tthis.rhand.gy = this.verCenter;\n\tthis.rhand.gx0 = this.horCenter;\n\tthis.rhand.gy0 = this.verCenter;\n\tthis.rhand.gx1 = this.horCenter;\n\tthis.rhand.gy1 = this.verCenter;\n\n\tthis.lhand.bh = 2;\n\tthis.lhand.st = JMLib.OBJECT_HAND;\n\tthis.lhand.thand = 0;\n\tthis.lhand.chand = 0;\n\tthis.lhand.gx = this.horCenter;\n\tthis.lhand.gy = this.verCenter;\n\tthis.lhand.gx0 = this.horCenter;\n\tthis.lhand.gy0 = this.verCenter;\n\tthis.lhand.gx1 = this.horCenter;\n\tthis.lhand.gy1 = this.verCenter;\n\n\tfor (i = 0; i < this.pattw; i++) {\n\t\tthis.r[i] = 0;\n\t}return 0;\n};\n\nJMLib.prototype.set_dpm = function () {\n\tvar cSpeed0;\n\n\tcSpeed0 = this.cSpeed;\n\tthis.cSpeed = 2.0;\n\tthis.base = 0;\n\tthis.dpm = 400;\n\n\tthis.gy_max = 80 - 11;\n\tthis.gy_min = -200 - 11;\n\tthis.gx_max = -1000;\n\tthis.gx_min = 1000;\n\n\tif (this.set_ini(1) == 0) {\n\t\tfor (this.time_count = 0; this.time_count < this.tw * (this.pattw + this.pmax + this.style_len); this.time_count++) {\n\t\t\tfor (var i = 0; i < this.balln; i++) {\n\t\t\t\tthis.juggle(this.b[i]);\n\t\t\t\tthis.gy_max = JMLib.max(this.gy_max, this.b[i].gy);\n\t\t\t\tthis.gy_min = JMLib.min(this.gy_min, this.b[i].gy);\n\t\t\t\tthis.gx_max = JMLib.max(this.gx_max, this.b[i].gx + 2 * 11 * this.dpm / this.DW); // changed from X11 version\n\t\t\t\tthis.gx_min = JMLib.min(this.gx_min, this.b[i].gx);\n\t\t\t}\n\n\t\t\tthis.juggle(this.rhand);\n\t\t\tthis.juggle(this.lhand);\n\n\t\t\tthis.gy_max = JMLib.max(this.gy_max, this.rhand.gy);\n\t\t\tthis.gy_min = JMLib.min(this.gy_min, this.rhand.gy);\n\t\t\tthis.gy_max = JMLib.max(this.gy_max, this.lhand.gy);\n\t\t\tthis.gy_min = JMLib.min(this.gy_min, this.lhand.gy);\n\n\t\t\tthis.gx_max = JMLib.max(this.gx_max, this.rhand.gx);\n\t\t\tthis.gx_min = JMLib.min(this.gx_min, this.rhand.gx);\n\t\t\tthis.gx_max = JMLib.max(this.gx_max, this.lhand.gx);\n\t\t\tthis.gx_min = JMLib.min(this.gx_min, this.lhand.gx);\n\n\t\t\tthis.arm_x = parseInt((22 - 11) * this.dpm / JMLib.DW);\n\t\t\tthis.arm_y = parseInt((16 - 11) * this.dpm / JMLib.DW);\n\n\t\t\t// from JMWin:\n\t\t\t//ap.rx[0]=rhand.gx +11*dpm/DW+arm_x;\n\t\t\t//ap.ry[0]=rhand.gy +11*dpm/DW+arm_y;\n\t\t\t//ap.lx[0]=lhand.gx +11*dpm/DW-arm_x;\n\t\t\t//ap.ly[0]=lhand.gy +11*dpm/DW+arm_y;\n\t\t\t//\n\n\t\t\tthis.arm_line();\n\n\t\t\tfor (i = 0; i < 5; i++) {\n\t\t\t\tthis.gx_max = JMLib.max(this.gx_max, this.ap.rx[i]);\n\t\t\t\tthis.gx_max = JMLib.max(this.gx_max, this.ap.lx[i]);\n\t\t\t\tthis.gx_min = JMLib.min(this.gx_min, this.ap.rx[i]);\n\t\t\t\tthis.gx_min = JMLib.min(this.gx_min, this.ap.lx[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (this.gy_max - this.gy_min > 0) {\n\t\t// special handling for smaller screens\n\t\tif (this.imageWidth <= 320) {\n\t\t\tif (this.imageWidth > 160) {\n\t\t\t\t// 160-320 width\n\t\t\t\tthis.dpm = parseInt(this.imageHeight * 280 / (this.gy_max - this.gy_min));\n\t\t\t\tthis.base = parseInt(this.imageHeight - this.gy_max * this.dpm / this.imageHeight - 5);\n\t\t\t} else {\n\t\t\t\t// 0-160 width\n\t\t\t\tthis.dpm = parseInt(this.imageHeight * 280 / (this.gy_max - this.gy_min));\n\t\t\t\tthis.base = parseInt(this.imageHeight - this.imageHeight / 4);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.dpm = parseInt(400.0 * (this.imageHeight - 30 * 2) / (this.gy_max - this.gy_min));\n\t\t\tthis.base = parseInt(this.imageHeight - 30 - this.gy_max * this.dpm / 400);\n\t\t}\n\n\t\tthis.gx_min = parseInt(this.horCenter - (this.horCenter - this.gx_min) * this.dpm / 400);\n\t\tthis.gx_max = parseInt(this.horCenter - (this.horCenter - this.gx_max) * this.dpm / 400);\n\n\t\t// original version\n\t\t//dpm=(JML_INT32)(400.0*340/(gy_max-gy_min));\n\t\t//if(dpm>DW) dpm=DW;\n\t\t//base=370-(JML_INT32)( (JML_FLOAT)gy_max*dpm/400 );\n\t}\n\n\tthis.cSpeed = cSpeed0;\n};\n\nJMLib.prototype.set_patt = function (s) {\n\tvar flag = 0;\n\tvar flag2 = 0;\n\tvar a = 0;\n\tvar pos = 0;\n\n\tif (s.length > JMLib.LMAX) return 10;\n\n\tthis.pattw = 0;\n\tthis.balln = 0;\n\n\tif (s.charAt(0) == '(') this.syn = 1;else this.syn = 0;\n\n\tfor (var i = 0; i < JMLib.LMAX; i++) {\n\t\tif (i >= s.length) {\n\t\t\tif (flag != 0 || flag2 != 0) return 4;\n\t\t\tbreak;\n\t\t}\n\n\t\tif (s.charAt(pos) == '[') {\n\t\t\tflag2 = 1;\n\t\t\tthis.patts[this.pattw] = 0;\n\t\t\tpos++;\n\t\t\tcontinue;\n\t\t}\n\t\tif (s.charAt(pos) == ']') {\n\t\t\tif (flag2 == 0) return 4;\n\t\t\tflag2 = 0;\n\t\t\tthis.pattw++;\n\t\t\tpos++;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (this.syn == 1) {\n\t\t\tswitch (s.charAt(pos)) {\n\t\t\t\tcase '(':\n\t\t\t\t\tif (flag != 0) return 4;\n\t\t\t\t\tflag = 1;\n\t\t\t\t\tpos++;\n\t\t\t\t\tcontinue;\n\t\t\t\tcase ')':\n\t\t\t\t\tif (flag != 5) return 4;\n\t\t\t\t\tflag = 0;\n\t\t\t\t\tpos++;\n\t\t\t\t\tcontinue;\n\t\t\t\tcase ',':\n\t\t\t\t\tif (flag != 2) return 4;\n\t\t\t\t\tflag = 4;\n\t\t\t\t\tpos++;\n\t\t\t\t\tcontinue;\n\t\t\t\tcase 'X':\n\t\t\t\tcase 'x':\n\t\t\t\t\tif (flag != 2 && flag != 5) return 4;\n\t\t\t\t\tif (flag2) this.patt[this.pattw][this.patts[this.pattw] - 1] = -a;else this.patt[this.pattw - 1][0] = -a;\n\t\t\t\t\tpos++;\n\t\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\n\t\ta = this.ctod(s.charAt(pos));\n\t\tif (a == -1) return 6;\n\n\t\tif (this.syn) {\n\t\t\tif (a % 2) return 7;\n\t\t\tif (flag2 == 0 && flag != 1 && flag != 4) return 4;\n\t\t\tif (flag == 1) flag = 2;\n\t\t\tif (flag == 4) flag = 5;\n\t\t}\n\n\t\tif (flag2) {\n\t\t\tif (a == 0) return 13;\n\t\t\tthis.patt[this.pattw][this.patts[this.pattw]++] = a;\n\t\t\tif (this.patts[this.pattw] > JMLib.MMAX) return 8;\n\t\t} else {\n\t\t\tthis.patt[this.pattw][0] = a;\n\t\t\tif (a == 0) this.patts[this.pattw++] = 0;else this.patts[this.pattw++] = 1;\n\t\t}\n\t\tpos++;\n\t\tthis.balln += a;\n\t}\n\n\tif (this.pattw == 0) return 9;\n\tthis.balln = parseInt(this.balln / this.pattw);\n\n\tif (this.balln > JMLib.BMAX) return 9;\n\n\treturn 0;\n};\n\n// fixme: this function won't work\n// use similar function from validator instead\n/*\n JMLib.prototype.ctod = function(c) {\n if      (c >= '0' && c <= '9') return c - '0';\n else if (c >= 'a' && c <= 'z') return c - 'a' + 10;\n else if (c >= 'A' && c <= 'Z') return c - 'A' + 10;\n\n return -1;\n }*/\n\nJMLib.prototype.ctod = function (s) {\n\tvar str_0 = new String(\"0\");\n\tvar str_a = new String(\"a\");\n\tvar str_A = new String(\"A\");\n\n\tif (s >= '0' && s <= '9') return s.charCodeAt(0) - str_0.charCodeAt(0);else if (s >= 'a' && s <= 'z') return s.charCodeAt(0) - str_a.charCodeAt(0) + 10;else if (s >= 'A' && s <= 'Z') return s.charCodeAt(0) - str_A.charCodeAt(0) + 10;else return -1;\n};\n\nJMLib.prototype.startJuggle = function () {\n\tthis.set_dpm();\n\tif (this.set_ini(1) != 0) return;\n\tthis.xbitset();\n\n\t// apply corrections\n\tthis.bm1 = 11 - parseInt(11 * this.dpm / JMLib.DW);\n\tthis.time_count = 0;\n\tthis.time_period = 0;\n\n\tthis.status = JMLib.ST_JUGGLE;\n};\n\nJMLib.prototype.stopJuggle = function () {\n\tthis.status = JMLib.ST_NONE;\n};\n\nJMLib.prototype.togglePause = function () {\n\tif (this.status == JMLib.ST_JUGGLE) this.status = JMLib.ST_PAUSE;else if (this.status == JMLib.ST_PAUSE) this.status = JMLib.ST_JUGGLE;\n};\n\nJMLib.prototype.setPause = function (pauseOn) {\n\tif (this.status != JMLib.ST_NONE) {\n\t\tif (pauseOn) this.status = JMLib.ST_PAUSE;else this.status = JMLib.ST_JUGGLE;\n\t}\n};\n\nJMLib.prototype.getStatus = function () {\n\treturn this.status;\n};\n\n// fixme: xpos function seems to be wrong\nJMLib.prototype.fadd = function (x, k, t) {\n\treturn ((x + t) * JMLib.xpow(10, k) + .5) / JMLib.xpow(10, k);\n};\n\nJMLib.prototype.speedUp = function () {\n\tthis.cSpeed = JMLib.SPEED_MAX;\n\tthis.set_ini(0);\n};\n\nJMLib.prototype.speedDown = function () {\n\tthis.cSpeed = JMLib.SPEED_MIN;\n\tthis.set_ini(0);\n};\n\nJMLib.prototype.speedReset = function () {\n\tthis.cSpeed = JMLib.SPEED_DEF;\n\tthis.set_ini(0);\n};\n\nJMLib.prototype.setSpeed = function (s) {\n\tthis.cSpeed = s;\n\tthis.set_ini(0);\n};\n\nJMLib.prototype.speed = function () {\n\treturn this.cSpeed;\n};\n\nJMLib.prototype.doJuggle = function () {\n\tvar i,\n\t    tone = 0;\n\n\tif (this.status == JMLib.ST_PAUSE || this.status == JMLib.ST_NONE) {\n\t\treturn 0;\n\t}\n\n\tthis.time_count++;\n\n\tif (this.time_count < this.aw) this.time_count = this.aw;\n\n\tthis.time_period = parseInt((this.time_count - this.aw) / this.tw);\n\tthis.time_period %= this.pattw;\n\t//this.time_period = time_count % pattw;\n\n\tfor (i = 0; i < this.balln; i++) {\n\t\tif (this.juggle(this.b[i]) && this.beep) tone = JMLib.max(tone, JMLib.xabs(this.b[i].bh));\n\t}if (this.juggle(this.rhand) + this.juggle(this.lhand) > 0) {\n\t\t//if (back_on==1) patt_print(1);\n\t}\n\n\tthis.arm_line();\n\tthis.applyCorrections();\n\n\tif (this.scalingMethod == JMLib.SCALING_METHOD_DYNAMIC) this.doCoordTransform();\n\n\treturn tone;\n};\n\nJMLib.prototype.xbitset = function () {\n\tvar i,\n\t    j = 0;\n\n\t// data is used to create the hand bitmaps\n\tvar data = [0, 18, 0, 23, 17, 23, 20, 22, 22, 20, 23, 17, 23, 12, 18, 12, 18, 16, 16, 18, 0, 18, 12, 15, 23, 17, 99, 99];\n\n\t// initialize the data array.\n\tfor (i = 0; data[i] < 99; i++) {\n\t\tdata[i] = parseInt((data[i] - 11) * this.dpm / JMLib.DW);\n\t} // apply hand placement offsets\n\tthis.hand_x = data[i - 4] + 2;\n\tthis.hand_y = data[i - 3] + 2;\n\tthis.arm_x = data[i - 2];\n\tthis.arm_y = data[i - 1];\n\n\t// calculate hand polygons\n\tfor (i = 0; data[i + 6] < 99; i += 2) {\n\t\tif (j > 9) break;\n\n\t\tthis.handpoly_ex.rx[j] = 11 + data[i];\n\t\tthis.handpoly_ex.ry[j] = 10 + data[i + 1];\n\n\t\tthis.handpoly_ex.lx[j] = 12 - data[i];\n\t\tthis.handpoly_ex.ly[j] = 10 + data[i + 1];\n\n\t\tj++;\n\t}\n\n\tfor (i = 0; i <= 9; i++) {\n\t\tthis.handpoly.rx[i] = this.handpoly_ex.rx[i];\n\t\tthis.handpoly.ry[i] = this.handpoly_ex.ry[i];\n\t\tthis.handpoly.lx[i] = this.handpoly_ex.lx[i];\n\t\tthis.handpoly.ly[i] = this.handpoly_ex.ly[i];\n\t}\n};\n\nJMLib.prototype.doStepcalc = function () {\n\tvar i;\n\tvar stp = 0; // position in steps array\n\tvar pos = 0; // position in string\n\n\t// reset\n\tfor (i = 0; i < JMLib.LMAX; i++) {\n\t\tthis.steps[i] = -1;\n\t}\n\n\t// Synchronous pattern\n\tif (this.syn) {\n\t\twhile (pos <= this.siteswap.length) {\n\t\t\tif (this.siteswap.charAt(pos) == '(') {\n\t\t\t\tthis.steps[stp] = pos;\n\t\t\t\tstp += 2;\n\t\t\t\twhile (this.siteswap.charAt(pos) != ')') {\n\t\t\t\t\tpos++;\n\t\t\t\t}\n\t\t\t\tpos++;\n\t\t\t} else if (pos == this.siteswap.length) {\n\t\t\t\tthis.steps[stp] = pos;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tthis.error(\"Internal error\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t} else {\n\t\twhile (pos <= this.siteswap.length) {\n\t\t\tif (this.siteswap.charAt(pos) == '(') {\n\t\t\t\tthis.error(\"Internal error\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Multiplex\n\t\t\telse if (this.siteswap.charAt(pos) == '[') {\n\t\t\t\t\tthis.steps[stp++] = pos;\n\t\t\t\t\twhile (this.siteswap.charAt(pos) != ']') {\n\t\t\t\t\t\tpos++;\n\t\t\t\t\t}\n\t\t\t\t\tpos++;\n\t\t\t\t}\n\t\t\t\t// Normal throw\n\t\t\t\telse {\n\t\t\t\t\t\tthis.steps[stp++] = pos++;\n\t\t\t\t\t}\n\t\t}\n\t}\n};\n\nmodule.exports = JMLib;\n\n\n/** WEBPACK FOOTER **\n ** ../dist/jmlib.js\n **/","\"use strict\";\n\n/*\n * jmlib-js - Portable JuggleMaster Library (JavaScript Version)\n * Version 2.0\n * (C) Per Johan Groland 2006-2016\n *\n * Based on JMLib 2.0, (C) Per Johan Groland and Gary Briggs\n *\n * Based on JuggleMaster Version 1.60\n * Copyright (c) 1995-1996 Ken Matsuoka\n *\n * You may redistribute and/or modify JMLib_js under the terms of the\n * Modified BSD License as published in various places online or in the\n * COPYING.jmlib file in the package you downloaded.\n *\n * This program is distributed in the hope that it will be useful, but\n * WITHOUT  ANY  WARRANTY;  without   even  the  implied  warranty  of\n * MERCHANTABILITY or  FITNESS FOR A PARTICULAR PURPOSE.   See the\n * Modified BSD License for more details.\n */\n\nvar PI = 3.14159265;\nvar HALF_PI = 1.570796325;\nvar OBJECT_UNDER = 0x02;\n\n// Ball class\nfunction Ball() {\n\tthis.bh = 0; // throw height\n\tthis.gx = 0; // x position\n\tthis.gy = 0; // y position\n\tthis.gx0 = 0; // previous position\n\tthis.gy0 = 0; // ???\n\tthis.gx1 = 0; // ???\n\tthis.gy1 = 0; // ???\n\tthis.c = 0; // ???\n\tthis.c0 = 0; // ???\n\tthis.chand = 0; // catching hand (0-left, 1-right)\n\tthis.thand = 0; // throwing hand (0-left, 1-right)\n\tthis.st = 0; // object status (OBJECT_HAND etc.)\n\tthis.t = 0; // for spin calculation\n}\n\nBall.prototype.getSpin = function (spins) {\n\tif (this.isHolding()) {\n\t\treturn HALF_PI;\n\t} else {\n\t\treturn (HALF_PI + this.t * PI) * ((spins * this.bh - 1) / 2);\n\t}\n};\n\nBall.prototype.isHolding = function () {\n\treturn this.st & OBJECT_UNDER;\n};\n\nBall.prototype.toString = function () {\n\treturn \"gx=\" + this.gx + \",gy=\" + this.gy;\n};\n\nmodule.exports = Ball;\n\n\n/** WEBPACK FOOTER **\n ** ../dist/ball.js\n **/","\"use strict\";\n\n/*\n * jmlib-js - Portable JuggleMaster Library (JavaScript Version)\n * Version 2.0\n * (C) Per Johan Groland 2006-2016\n *\n * Based on JMLib 2.0, (C) Per Johan Groland and Gary Briggs\n *\n * Based on JuggleMaster Version 1.60\n * Copyright (c) 1995-1996 Ken Matsuoka\n *\n * You may redistribute and/or modify JMLib_js under the terms of the\n * Modified BSD License as published in various places online or in the\n * COPYING.jmlib file in the package you downloaded.\n *\n * This program is distributed in the hope that it will be useful, but\n * WITHOUT  ANY  WARRANTY;  without   even  the  implied  warranty  of\n * MERCHANTABILITY or  FITNESS FOR A PARTICULAR PURPOSE.   See the\n * Modified BSD License for more details.\n */\n\nfunction Arm() {\n  this.rx = new Array(6); // coordinates of the right arm\n  this.ry = new Array(6);\n  this.lx = new Array(6); // coordinates of the left arm\n  this.ly = new Array(6);\n  this.hx = 0; // coordinates of the head\n  this.hy = 0;\n  this.hr = 0;\n}\n\nmodule.exports = Arm;\n\n\n/** WEBPACK FOOTER **\n ** ../dist/arm.js\n **/","\"use strict\";\n\n/*\n * jmlib-js - Portable JuggleMaster Library (JavaScript Version)\n * Version 2.0\n * (C) Per Johan Groland 2006-2016\n *\n * Based on JMLib 2.0, (C) Per Johan Groland and Gary Briggs\n *\n * Based on JuggleMaster Version 1.60\n * Copyright (c) 1995-1996 Ken Matsuoka\n *\n * You may redistribute and/or modify JMLib_js under the terms of the\n * Modified BSD License as published in various places online or in the\n * COPYING.jmlib file in the package you downloaded.\n *\n * This program is distributed in the hope that it will be useful, but\n * WITHOUT  ANY  WARRANTY;  without   even  the  implied  warranty  of\n * MERCHANTABILITY or  FITNESS FOR A PARTICULAR PURPOSE.   See the\n * Modified BSD License for more details.\n */\n\nfunction Hand() {\n  this.rx = new Array(10); // polygon for the right hand\n  this.ry = new Array(10);\n  this.lx = new Array(10); // polygon for the left hand\n  this.ly = new Array(10);\n}\n\nmodule.exports = Hand;\n\n\n/** WEBPACK FOOTER **\n ** ../dist/hand.js\n **/","'use strict';\n\n/*\n * jmlib-js - Portable JuggleMaster Library (JavaScript Version)\n * Version 2.0\n * (C) Per Johan Groland 2006-2016\n *\n * Based on JMLib 2.0, (C) Per Johan Groland and Gary Briggs\n *\n * Based on JuggleMaster Version 1.60\n * Copyright (c) 1995-1996 Ken Matsuoka\n *\n * You may redistribute and/or modify JMLib_js under the terms of the\n * Modified BSD License as published in various places online or in the\n * COPYING.jmlib file in the package you downloaded.\n *\n * This program is distributed in the hope that it will be useful, but\n * WITHOUT  ANY  WARRANTY;  without   even  the  implied  warranty  of\n * MERCHANTABILITY or  FITNESS FOR A PARTICULAR PURPOSE.   See the\n * Modified BSD License for more details.\n */\n\n/*\n * Some notes on the implementation:\n *\n * - The site validator is entirely independent from the rest of jmlib.\n * - Notation:\n *   VSS  = Vanilla Siteswap (e.g. 534)\n *   MSS  = Multiplexed Siteswap (e.g. 25[75]51)\n *   SSS  = Sync Siteswap (e.g. (4,2x)(2x,4) and ([6x6],2)(2,[6x6]) )\n *          (The last example is a sync multiplexed site.)\n *\n * - The implementation is done in two parts:\n *   * Validate syntax\n *   * Validate site\n *   This is not the most effective methods (that would be to validate syntax\n *   on the fly when validating the site). This method is however more flexible\n *   in that it allows the syntax to be validated separately.\n *\n */\n\n// convert a single siteswap digit (0-9 and a-z) to a number\nfunction siteDigit(s) {\n\tvar str_0 = '0',\n\t    str_a = 'a',\n\t    str_A = 'A';\n\n\tif (s >= '0' && s <= '9') return s.charCodeAt(0) - str_0.charCodeAt(0);else if (s >= 'a' && s <= 'z') return s.charCodeAt(0) - str_a.charCodeAt(0) + 10;else if (s >= 'A' && s <= 'Z') return s.charCodeAt(0) - str_A.charCodeAt(0) + 10;else return -1;\n}\n\n// convert a siteswap number to character (0-9 and a-z)\nfunction siteChar(c) {\n\tvar str_a = 'a';\n\n\tif (c === '[' || c === ']') return c;else if (c >= 0 && c <= 9) return c;else return String.fromCharCode(c - 10 + str_a.charCodeAt(0));\n}\n\nfunction JMValidator() {}\n\nJMValidator.pos = 0;\n\n// Scans a MSS for valid syntax\nJMValidator.scanMSS = function (site) {\n\tthis.pos++; // skip '['\n\n\tif (site.charAt(this.pos) === ']') // empty multiplex throw\n\t\treturn false;\n\n\twhile (site.charAt(this.pos) !== ']') {\n\t\tif (this.pos === site.length) return false; // premature end of site\n\n\t\tif (siteDigit(site.charAt(this.pos)) === -1) // only single site throws may appear\n\t\t\treturn false;\n\n\t\tthis.pos++;\n\t}\n\n\treturn true;\n};\n\n// Scans a SSS for valid syntax\nJMValidator.scanSSS = function (site) {\n\tthis.pos++; // skip '('\n\n\t// premature end of site\n\tif (this.pos === site.length) return false; // premature end of site\n\n\tif (site.charAt(this.pos) === '[') {\n\t\t// multiplex throw\n\t\tif (!JMValidator.scanMSS(site)) return false;\n\t} else if (siteDigit(site.charAt(this.pos)) === -1) // single throw\n\t\treturn false;\n\n\tthis.pos++; // skip to ', or 'x'\n\n\t// skip x if present\n\tif (site.charAt(this.pos) === 'x') {\n\t\tthis.pos++;\n\t}\n\n\tif (site.charAt(this.pos) !== ',') // ',' expected\n\t\treturn false;\n\n\tthis.pos++;\n\tif (this.pos === site.length) return false;\n\n\tif (site.charAt(this.pos) === '[') {\n\t\t// multiplex throw\n\t\tif (!JMValidator.scanMSS(site)) return false;\n\t} else if (siteDigit(site.charAt(this.pos)) === -1) // single throw\n\t\treturn false;\n\n\tthis.pos++; // skip to ')' or x\n\n\t// skip x if present\n\tif (site.charAt(this.pos) === 'x') {\n\t\tthis.pos++;\n\t}\n\n\tif (site.charAt(this.pos) !== ')') // ')' expected\n\t\treturn false;\n\n\tthis.pos++;\n\n\treturn true;\n};\n\n// Scans a site for valid syntax\nJMValidator.scanSite = function (site) {\n\tif (site.charAt(this.pos) === '(') {\n\t\t// sync site\n\t\twhile (site.charAt(this.pos) === '(') {\n\t\t\tif (!JMValidator.scanSSS(site)) return false;\n\t\t}\n\t\tif (this.pos < site.length - 1) return false;\n\t} else {\n\t\twhile (this.pos < site.length) {\n\t\t\tif (site.charAt(this.pos) === '[') {\n\t\t\t\tif (!JMValidator.scanMSS(site)) return false;\n\t\t\t\tthis.pos++;\n\t\t\t} else if (siteDigit(site.charAt(this.pos)) === -1) {\n\t\t\t\t// only single site throws may appear\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tthis.pos++;\n\t\t\t}\n\t\t}\n\t}\n\treturn true;\n};\n\nJMValidator.validateSiteSyntax = function (site) {\n\tthis.pos = 0;\n\n\t// Check for valid characters\n\tfor (var i = 0; i < site.length; i++) {\n\t\tif (site.charAt(i) !== '[' && site.charAt(i) !== ']' && site.charAt(i) !== '(' && site.charAt(i) !== ')' && site.charAt(i) !== ',') {\n\t\t\tif (siteDigit(site.charAt(i)) === -1) return false;\n\t\t}\n\t}\n\n\treturn JMValidator.scanSite(site);\n};\n\nJMValidator.validateSite = function (site) {\n\tif (site === null) return false;\n\n\tif (site.length === 0) return false;\n\n\tif (JMValidator.validateSiteSyntax(site)) {\n\t\tthis.pos = 0;\n\t\tif (site.charAt(0) === '(') // SSS\n\t\t\treturn JMValidator.validateSSS(site);else // VSS or MSS\n\t\t\treturn JMValidator.validateMSS(site);\n\t}\n\t//document.write(\"invalid syntax for site '\" + site + \"'<br>\");\n\treturn false;\n};\n\n/*\n * Let VSS be the siteswap to validate.\n * Let LS be a sequence of 1's the length of VSS\n *\n * Algorithm:\n *\n * for (i = 0; i <= len(VSS)-1; i++)\n *   x = VSS(i);\n *   LS((i+x) mod len(VSS))--;\n *\n * VSS is valid iff LS is a sequence of zeros\n *\n * Note: The method validateMSS validates VSSs as well.\n */\nJMValidator.validateVSS = function (site) {\n\tvar i = void 0,\n\t    x = void 0,\n\t    len = site.length,\n\t    ls = [];\n\n\tfor (i = 0; i < len; i++) {\n\t\tls[i] = 1;\n\t}for (i = 0; i < len; i++) {\n\t\tx = siteDigit(site.charAt(i));\n\t\tls[(i + x) % len]--;\n\t}\n\n\tfor (i = 0; i < len; i++) {\n\t\tif (ls[i] !== 0) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n};\n\nJMValidator.validateSSS = function (site) {\n\tvar MSS = JMValidator.transSyncMSS(site);\n\n\tif (MSS) {\n\t\treturn JMValidator.validateMSS(MSS);\n\t} else return false;\n};\n\n/*\n * The throw capacity LS of a MSS is the amount of balls multiplexed for each throw.\n * e.g. for [54]24 the throw capacity is 211.\n *\n * A MSS can be validated by calculating the throw capacity and then verifying it using\n * the same algorithm as used for a VSS with the exception that the modulo must be calculated\n * from the throw count of the pattern (since this will be different from the length).\n *\n * This implementation can also be used to validate a VSS.\n *\n */\nJMValidator.validateMSS = function (site) {\n\tvar i = void 0,\n\t    x = void 0,\n\t    len = site.length,\n\t    ls = [],\n\t    lsLen = 0,\n\t    throwCount = 0;\n\n\tfor (i = 0; i < len; i++) {\n\t\tls[i] = 0;\n\t}for (i = 0; i < len; i++) {\n\t\tif (site.charAt(i) === '[') {\n\t\t\twhile (site.charAt(++i) !== ']') {\n\t\t\t\tls[lsLen]++;\n\t\t\t}lsLen++;\n\t\t} else ls[lsLen++]++;\n\t}\n\n\tfor (i = 0; i < len; i++) {\n\t\tif (site.charAt(i) === '[') {\n\t\t\twhile (site.charAt(++i) !== ']') {\n\t\t\t\tx = siteDigit(site.charAt(i));\n\t\t\t\tls[(throwCount + x) % lsLen]--;\n\t\t\t}\n\t\t\tthrowCount++;\n\t\t} else {\n\t\t\tx = siteDigit(site.charAt(i));\n\t\t\tls[(throwCount + x) % lsLen]--;\n\t\t\tthrowCount++;\n\t\t}\n\t}\n\n\tfor (i = 0; i < lsLen; i++) {\n\t\tif (ls[i] !== 0) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n};\n\nJMValidator.transSyncMSS = function (SSS) {\n\tvar i = void 0,\n\t    x = void 0,\n\t    len = SSS.length,\n\t    add = 1,\n\t    mssPos = 0,\n\t    MSS = [];\n\n\tfor (i = 0; i < len; i++) {\n\t\tif (SSS.charAt(i) === '(' || SSS.charAt(i) === ',') {\n\t\t\t// start of sync throw or second in pair\n\t\t\tif (SSS.charAt(i) === '(') add = 1;else if (SSS.charAt(i) === ',') add = -1;\n\n\t\t\ti++; // skip '('\n\n\t\t\tif (SSS.charAt(i) === '[') {\n\t\t\t\t// multiplex in sync throw\n\t\t\t\tMSS[mssPos++] = '[';\n\t\t\t\ti++; // skip '['\n\n\t\t\t\twhile (SSS.charAt(i) !== ']') {\n\t\t\t\t\tx = siteDigit(SSS.charAt(i));\n\t\t\t\t\tif (x % 2 !== 0) return null;\n\n\t\t\t\t\tif (SSS[i + 1] === 'x') {\n\t\t\t\t\t\tMSS[mssPos++] = x + add;\n\t\t\t\t\t\ti++; // skip 'x'\n\t\t\t\t\t} else MSS[mssPos++] = x;\n\n\t\t\t\t\ti++; // skip to next\n\t\t\t\t}\n\n\t\t\t\tMSS[mssPos++] = ']';\n\t\t\t} else {\n\t\t\t\t// single sync throw\n\t\t\t\tx = siteDigit(SSS.charAt(i));\n\n\t\t\t\tif (x % 2 !== 0) return null;\n\n\t\t\t\tif (SSS.charAt(i + 1) === 'x') {\n\t\t\t\t\tMSS[mssPos++] = x + add;\n\t\t\t\t\ti++; // skip 'x'\n\t\t\t\t} else {\n\t\t\t\t\t\tMSS[mssPos++] = x;\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tvar MSS_str = '';\n\n\tfor (i = 0; i < mssPos; i++) {\n\t\tMSS_str = MSS_str.concat(siteChar(MSS[i]));\n\t}\n\n\treturn MSS_str;\n};\n\nmodule.exports = JMValidator;\n\n\n/** WEBPACK FOOTER **\n ** ../dist/validator.js\n **/"],"sourceRoot":""}